# Production API Configuration
# Central configuration for healthcare API management system

# API Configuration
API_NAME="Healthcare API Management System"
API_VERSION="3.0.0"
API_ENVIRONMENT="production"
API_BASE_URL="https://api.healthcare.org/v3"
API_DESCRIPTION="Production-grade healthcare API with EHR integration"

# Server Configuration
HOST="0.0.0.0"
PORT=8000
DEBUG=false
WORKERS=4
MAX_CONNECTIONS=1000

# Security Configuration
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
JWT_ALGORITHM="HS256"
JWT_EXPIRY_MINUTES=60
REFRESH_TOKEN_EXPIRY_DAYS=30

# Encryption Configuration
ENCRYPTION_KEY="your-encryption-key-change-in-production"
HASH_ALGORITHM="sha256"

# API Key Configuration
API_KEY_EXPIRY_DAYS=365
API_KEY_PREFIX="hc_key"
API_KEY_LENGTH=32

# Rate Limiting Configuration
DEFAULT_RATE_LIMIT=100
DEFAULT_RATE_LIMIT_WINDOW=60
BURST_LIMIT=150
EMERGENCY_RATE_LIMIT=1000

# OAuth2 Configuration
OAUTH2_CLIENT_ID="your-oauth2-client-id"
OAUTH2_CLIENT_SECRET="your-oauth2-client-secret"
OAUTH2_AUTHORIZATION_URL="https://auth.healthcare.org/oauth/authorize"
OAUTH2_TOKEN_URL="https://auth.healthcare.org/oauth/token"
OAUTH2_SCOPES="read:patients write:patients read:observations"

# Database Configuration
DATABASE_URL="postgresql://healthcare_user:password@localhost:5432/healthcare_db"
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_ECHO=false

# Redis Configuration
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD="your-redis-password"
REDIS_DB=0
REDIS_SOCKET_TIMEOUT=5
REDIS_CONNECTION_POOL_SIZE=50

# Kong Gateway Configuration
KONG_ADMIN_URL="http://kong:8001"
KONG_PROXY_URL="http://kong:8000"
KONG_CONSUL_URL="http://consul:8500"

# AWS Configuration
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
API_GATEWAY_ID="your-api-gateway-id"
CERTIFICATE_ARN="your-certificate-arn"

# FHIR Configuration
FHIR_BASE_URL="https://api.healthcare.org/fhir"
FHIR_VERSION="4.0.1"
FHIR_VALIDATION_ENABLED=true
FHIR_CAPABILITY_STATEMENT_URL="/fhir/metadata"

# Webhook Configuration
WEBHOOK_ENCRYPTION_KEY="your-webhook-encryption-key"
WEBHOOK_TIMEOUT=30
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=5
WEBHOOK_MAX_CONCURRENT=10

# Epic EHR Configuration
EPIC_CLIENT_ID="your-epic-client-id"
EPIC_CLIENT_SECRET="your-epic-client-secret"
EPIC_FHIR_BASE_URL="https://fhir.epic.com/interconnect-fhir-oauth"
EPIC_WEBHOOK_SECRET="your-epic-webhook-secret"

# Cerner EHR Configuration
CERNER_TENANT_ID="your-cerner-tenant-id"
CERNER_CLIENT_ID="your-cerner-client-id"
CERNER_CLIENT_SECRET="your-cerner-client-secret"
CERNER_FHIR_BASE_URL="https://fhir-open.cerner.com/r4"

# Monitoring Configuration
PROMETHEUS_URL="http://prometheus:9090"
GRAFANA_URL="http://grafana:3000"
METRICS_RETENTION_DAYS=30
ALERT_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"

# Billing Configuration
STRIPE_SECRET_KEY="sk_test_your-stripe-secret-key"
STRIPE_WEBHOOK_SECRET="whsec_your-stripe-webhook-secret"
BILLING_WEBHOOK_URL="https://api.healthcare.org/billing/webhook"
DEFAULT_PLAN="professional"
INVOICE_TEMPLATE_ID="your-invoice-template-id"

# Email Configuration
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USERNAME="your-email@healthcare.org"
SMTP_PASSWORD="your-email-password"
FROM_EMAIL="noreply@healthcare.org"
FROM_NAME="Healthcare API System"

# Notification Configuration
SLACK_BOT_TOKEN="xoxb-your-slack-bot-token"
SLACK_CHANNEL="#api-alerts"
PAGERDUTY_API_KEY="your-pagerduty-api-key"

# Logging Configuration
LOG_LEVEL="INFO"
LOG_FORMAT="json"
LOG_FILE="logs/healthcare-api.log"
LOG_MAX_SIZE="100MB"
LOG_BACKUP_COUNT=5
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# CORS Configuration
CORS_ORIGINS="https://healthcare.org,https://app.healthcare.org"
CORS_METHODS="GET,POST,PUT,DELETE,OPTIONS,PATCH"
CORS_HEADERS="Content-Type,Authorization,X-API-Key,X-Request-ID"
CORS_MAX_AGE=3600

# File Upload Configuration
MAX_FILE_SIZE="50MB"
ALLOWED_FILE_TYPES="pdf,jpg,jpeg,png,txt,csv"
UPLOAD_PATH="/app/uploads"
TEMP_PATH="/app/temp"

# Cache Configuration
CACHE_TTL=3600
CACHE_MAX_SIZE=10000
CACHE_CLEANUP_INTERVAL=300

# Background Jobs Configuration
CELERY_BROKER_URL="redis://localhost:6379/1"
CELERY_RESULT_BACKEND="redis://localhost:6379/2"
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
DATABASE_HEALTH_CHECK=true
REDIS_HEALTH_CHECK=true
EXTERNAL_SERVICE_HEALTH_CHECK=true

# Performance Configuration
REQUEST_TIMEOUT=30
KEEP_ALIVE_TIMEOUT=5
MAX_REQUEST_SIZE="10MB"
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# Development Configuration
DEV_MODE=false
AUTO_RELOAD=false
API_DOCS_ENABLED=true
DEBUG_TOOLBAR_ENABLED=false

# Feature Flags
FEATURE_FHIR_ENABLED=true
FEATURE_WEBHOOKS_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_BILLING_ENABLED=true
FEATURE_REAL_TIME_ENABLED=true
FEATURE_AI_ASSISTANT_ENABLED=true

# Compliance Configuration
HIPAA_COMPLIANCE_ENABLED=true
AUDIT_LOGGING_ENABLED=true
DATA_ENCRYPTION_AT_REST=true
DATA_ENCRYPTION_IN_TRANSIT=true
ACCESS_LOGGING_ENABLED=true
SESSION_TIMEOUT_MINUTES=30

# API Versioning Configuration
DEFAULT_API_VERSION="3.0.0"
SUPPORTED_API_VERSIONS="1.0.0,2.0.0,3.0.0"
VERSION_HEADER="X-API-Version"
ACCEPT_HEADER_VERSION_PREFIX="application/vnd.healthcare.v"

# Environment-specific overrides
# Production overrides
if [ "$ENVIRONMENT" = "production" ]; then
    LOG_LEVEL="WARNING"
    DEBUG=false
    API_DOCS_ENABLED=false
    DEV_MODE=false
fi

# Staging overrides
if [ "$ENVIRONMENT" = "staging" ]; then
    LOG_LEVEL="INFO"
    DEBUG=false
    API_DOCS_ENABLED=true
fi

# Development overrides
if [ "$ENVIRONMENT" = "development" ]; then
    LOG_LEVEL="DEBUG"
    DEBUG=true
    API_DOCS_ENABLED=true
    DEV_MODE=true
    AUTO_RELOAD=true
fi