# =============================================================================
# Medical AI Assistant - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://meduser:medpass@db:5432/meddb
POSTGRES_USER=meduser
POSTGRES_PASSWORD=medpass
POSTGRES_DB=meddb

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# =============================================================================
# Security & Authentication
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-change-in-production-use-strong-random-value
JWT_SECRET=your-jwt-secret-here-change-in-production-use-strong-random-value
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# PHI Encryption
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
PHI_ENCRYPTION_KEY=

# =============================================================================
# Model Configuration
# =============================================================================
# Model selection
MODEL_NAME=mistral-7b-instruct-v0.2
MODEL_PATH=/models/mistral-7b-instruct-v0.2
ADAPTER_PATH=/models/lora_adapters/medical_v1

# Inference settings
USE_8BIT=true
USE_FLASH_ATTENTION=false
MAX_NEW_TOKENS=512
TEMPERATURE=0.7
TOP_P=0.9
DO_SAMPLE=true

# Model serving
MODEL_DEVICE=cuda
MODEL_BATCH_SIZE=1
STREAMING_ENABLED=true

# =============================================================================
# Vector Store & RAG Configuration
# =============================================================================
VECTOR_STORE_TYPE=chroma
VECTOR_STORE_PATH=/vector_stores/medical
VECTOR_STORE_COLLECTION=medical_guidelines

# Embedding model
EMBEDDING_MODEL=sentence-transformers/all-mpnet-base-v2
EMBEDDING_DEVICE=cpu
EMBEDDING_BATCH_SIZE=32

# RAG settings
RAG_TOP_K=5
RAG_SCORE_THRESHOLD=0.7
RAG_MAX_CONTEXT_LENGTH=2000

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# CORS
FRONTEND_URL=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# WebSocket
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS=100

# =============================================================================
# Frontend Configuration
# =============================================================================
REACT_APP_API_URL=http://localhost:8000
REACT_APP_WS_URL=ws://localhost:8000/ws
REACT_APP_ENV=development

# =============================================================================
# Logging & Monitoring
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/medical-ai/app.log

# Structured logging
ENABLE_STRUCTURED_LOGGING=true
LOG_SQL_QUERIES=false

# Observability (LangSmith / LangChain)
LANGCHAIN_TRACING_V2=false
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_API_KEY=
LANGCHAIN_PROJECT=medical-ai-assistant

# =============================================================================
# Safety & Compliance
# =============================================================================
# Safety features
ENABLE_SAFETY_FILTERS=true
ENABLE_RED_FLAG_DETECTION=true
SAFETY_FILTER_STRICTNESS=high

# Audit logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_PATH=/var/log/medical-ai/audit.log
AUDIT_RETENTION_DAYS=2555

# Compliance
REQUIRE_PATIENT_CONSENT=true
ENABLE_PHI_REDACTION=true
PHI_REDACTION_LEVEL=strict

# =============================================================================
# Rate Limiting & Quotas
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_STORAGE=redis://redis:6379/0

# Session limits
MAX_SESSION_DURATION_MINUTES=30
MAX_MESSAGES_PER_SESSION=100

# =============================================================================
# EHR Integration
# =============================================================================
EHR_ENABLED=false
EHR_API_URL=
EHR_API_KEY=
EHR_TIMEOUT_SECONDS=5
EHR_RETRY_ATTEMPTS=3

# =============================================================================
# Demo Mode
# =============================================================================
DEMO_MODE=true
USE_SYNTHETIC_DATA=true
MOCK_EHR_RESPONSES=true

# =============================================================================
# Performance & Caching
# =============================================================================
REDIS_URL=redis://redis:6379/0
CACHE_TTL_SECONDS=3600
ENABLE_RESPONSE_CACHE=false

# =============================================================================
# Development Settings
# =============================================================================
DEBUG=false
RELOAD_ON_CHANGE=false
ENABLE_PROFILING=false

# Testing
TEST_DATABASE_URL=postgresql://meduser:medpass@db:5432/meddb_test
PYTEST_WORKERS=auto
